load("D:/OneDrive - Nexus365/WORK/Document/RESEARCH/COVID19/09_IJGS SI/FINAL_OUTPUT/Mobility/re1.tscluster.ckdelta.baseline.RData")
coef.g1
load("D:/OneDrive - Nexus365/WORK/Document/RESEARCH/COVID19/09_IJGS SI/FINAL_OUTPUT/Mobility/re1.tscluster.ckdelta.baseline.RData")
coef.g1
coe_df
coe.df
head(std.indep.data)
ltla
levles(ltla$CLU)
levels(ltla$CLU)
levels(ltlta$CLU)<-c("G4","G3","G1","G2")
levels(ltla$CLU)<-c("G4","G3","G1","G2")
plyr::count(ltla$CLU)
ltla$CLU<-factor(ltla$CLU,)
plyr::count(ltla$CLU)
ltla$CLU<-factor(ltla$CLU,levels=c("G1","G2","G3","G4"))
plyr::count(ltla$CLU)
knitr::opts_chunk$set(
echo = TRUE,
message = FALSE,
warning = FALSE
)
Sys.setlocale(locale="English_United Kingdom")
setwd("d:/OneDrive - Nexus365/WORK/Document/RESEARCH/COVID19/09_IJGS SI/FINAL_CODE/")
indep.data<-readRDS(paste(getwd(),"/EP_INDEP_DATA/indep.var.rda",sep=""))
Sys.setlocale(locale="English_United Kingdom")
setwd("d:/OneDrive - Nexus365/WORK/Document/RESEARCH/COVID19/09_IJGS SI/FINAL_CODE/")
indep.data<-readRDS(paste(getwd(),"/EP_INDEP_DATA/indep.var.rda",sep=""))
indep.data<-readRDS(paste(getwd(),"/EP_INDEP_DATA/indep.var.rda",sep=""))
indep.data
load("D:/OneDrive - Nexus365/WORK/Document/RESEARCH/COVID19/09_IJGS SI/FINAL_CODE/re1.tscluster.ckdelta.baseline.RData")
ltla
plyr::count(ltla$CLU)
levels(ltla$CLU)<-c("G4","G3","G1","G2")
ltla$CLU<-factor(ltla$CLU,levels=c("G1","G2","G3","G4"))
plyr::count(ltla$CLU)
indep.data
g
indep.data<-readRDS(paste(getwd(),"/EP_INDEP_DATA/indep.var.rda",sep=""))
getwd()
setwd("d:/WORKSPACE/GIT/covid19-eng-lockdown/process/")
indep.data<-readRDS("D:/OneDrive - Nexus365/WORK/Document/RESEARCH/COVID19/09_IJGS SI/FINAL_CODE/EP_INDEP_DATA/indep.var.rda")
indep.data
require(glmnet)
ltla<-ltla[order(ltla$LTLA19CD),]
indep.data<-indep.data[order(indep.data$LTLA19CD),]
std.indep.data<-as.data.frame(scale(indep.data[3:38]))
std.indep.data[is.na(std.indep.data)]<-0
##Scale the independent variable
y=as.matrix(ltla$CLU)
x=as.matrix(std.indep.data)
lasso.fit<-glmnet(x,y,family = "multinomial", alpha=1, standardise=FALSE, nfolds=10) #trace.it = TRUE)
plot(lasso.fit, xvar = "lambda", label = TRUE, type.coef = "2norm")
require(glmnet)
lasso.fit<-glmnet(x,y,family = "multinomial", alpha=1, standardise=FALSE, nfolds=10) #trace.it = TRUE)
y
lasso.fit<-glmnet(x,y,family = "multinomial", alpha=1, standardise=FALSE, nfolds=10) #trace.it = TRUE)
View(input.data)
input.data
indep.data
lasso.fit.re
Sys.setlocale(locale="English_United Kingdom")
setwd("d:/OneDrive - Nexus365/WORK/Document/RESEARCH/COVID19/09_IJGS SI/FINAL_CODE/")
load("MNL_draft_12Jun2021.RData")
require(performance)
require(AER)
require(MASS)
require(nnet)
rm(list=ls()[! ls() %in% c("mnl.m2","input.data")])
multicollinearity(mnl.m2) ##Multicollinearity test
coeftest(mnl.m2) ##MNl estimation coefficients (reference = latent cluster 1), by latent temporal clusters based upon the change in mobility am
mnl.m2$call
rm(list=ls())
require(sf)
require(dplyr)
require(lubridate)
ltla<-st_read("d:/OneDrive - Nexus365/WORK/Document/RESEARCH/COVID19/09_IJGS SI/FINAL_CODE/EN_LTLA_FOR_EP.shp")
en.ltla<-subset(ltla,grepl("E0*",LTLA19CD));rm(ltla)
mob.cluster<-read.csv("d:/OneDrive - Nexus365/WORK/Document/RESEARCH/COVID19/09_IJGS SI/FINAL_CODE/h04.per.re.dtw.csv");mob.cluster$CLU<-as.factor(mob.cluster$CLU)
mob.cluster
plyr::count(mob.cluster$CLU)
levels(mob.cluster$CLU)
str(mob.cluster)
levels(mob.cluster$CLU)<-c("G4","G3","G1","G2")
mob.cluster<-factor(mob.cluster,levels=c("G1","G2","G3","G4"))
plyr::count(mob.cluster$CLU)
rm(list=ls())
require(sf)
require(dplyr)
require(lubridate)
ltla<-st_read("d:/OneDrive - Nexus365/WORK/Document/RESEARCH/COVID19/09_IJGS SI/FINAL_CODE/EN_LTLA_FOR_EP.shp")
en.ltla<-subset(ltla,grepl("E0*",LTLA19CD));rm(ltla)
mob.cluster<-read.csv("d:/OneDrive - Nexus365/WORK/Document/RESEARCH/COVID19/09_IJGS SI/FINAL_CODE/h04.per.re.dtw.csv");mob.cluster$CLU<-as.factor(mob.cluster$CLU)
levels(mob.cluster$CLU)<-c("G4","G3","G1","G2")
mob.cluster$CLU<-factor(mob.cluster$CLU,levels=c("G1","G2","G3","G4"))
plyr::count(mob.cluster$CLU)
